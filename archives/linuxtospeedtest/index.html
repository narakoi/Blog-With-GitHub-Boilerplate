<!DOCTYPE HTML>
<html lang="english">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="renderer" content="webkit">
    <meta name="HandheldFriendly" content="true">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Maverick,koi,Galileo,blog" />
    <meta name="generator" content="Maverick 1.1" />
    <meta name="template" content="Galileo" />
    <link rel="alternate" type="application/rss+xml" title="Escape Project &raquo; RSS 2.0" href="/feed/index.xml" />
    <link rel="alternate" type="application/atom+xml" title="Escape Project &raquo; ATOM 1.0" href="/feed/atom/index.xml" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/narakoi/narakoi.github.io@master/assets/galileo-3f4dcc35c9.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/narakoi/narakoi.github.io@master/assets/ExSearch/ExSearch-182e5a8868.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/narakoi/narakoi.github.io@master/assets/katex.min.css">
    <link href="https://fonts.googleapis.com/css?family=Fira+Code&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700&display=swap">
    <script>
        var ExSearchConfig = {
            root: "",
            api: "https://cdn.jsdelivr.net/gh/narakoi/narakoi.github.io@master/cb618887bd81681a901fb84345fb3da3.json"
        }
    </script>
    
<title>在Linux中使用Speedtest测速完整版 - Escape Project</title>
<meta name="author" content="KOI" />
<meta name="description" content="来测个速八" />
<meta property="og:title" content="在Linux中使用Speedtest测速完整版 - Escape Project" />
<meta property="og:description" content="来测个速八" />
<meta property="og:site_name" content="Escape Project" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/archives/linuxtospeedtest/" />
<meta property="og:image" content="" />
<meta property="article:published_time" content="2020-03-28T07:21:00-00.00" />
<meta name="twitter:title" content="在Linux中使用Speedtest测速完整版 - Escape Project" />
<meta name="twitter:description" content="来测个速八" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="" />


    
<meta http-equiv="x-dns-prefetch-control" content="on">
<link rel="dns-prefetch" href="//cdn.jsdelivr.net" />
<link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/narakoi/narakoi.github.io@master/logo-%E5%A4%B4%E5%83%8F.jpg" type="image/x-icon" />

    </head>
    
    <body>
        
        <div class="container">
            <header id="ga-header">
                <div first>
                    <aside id="ga-brand">
                        <h1 class="brand"><a class="no-style" href="/">Escape Project</a></h1>
                        <p>Life kicks in right now.</p>
                    </aside>
                </div>
                <div second id="ga-nav">
                    <nav class="navs">
                        <ul><li><a class="ga-highlight" href="/" target="_self">Home</a></li><span class="separator">·</span><li><a class="ga-highlight" href="/archives/" target="_self">Archive</a></li><span class="separator">·</span><li><a class="ga-highlight" href="/about/" target="_self">About</a></li><span class="separator">·</span><li><a href="#" target="_self" class="search-form-input ga-highlight">Search</a></li></ul>
                    </nav>
                </div>
            </header>
            <div class="wrapper">
                
<main>    
    <section class="ga-section ga-content">
        <article class="yue">
            <h1 class="ga-post_title">在Linux中使用Speedtest测速完整版</h1>
            <span class="ga-post_meta ga-mono">
                <span>KOI</span>
                <time>
                    2020-03-28
                </time>
                
                in <a no-style class="category" href="/category/Linux/">
                    Linux
                </a>
                
                
            </span>
            <div class="ga-content_body">
                <blockquote><p>Speedtest是Ookla推出的一款基于全球视图的可视化网速测试工具。与众不同的是它可以在一个世界地图上来选择指定的测试服务器，用绿色三角标记的是建议用来测速的服务器，白点标记的是可用测试点服务器。测试的结果显示了你连接到此服务器的上传及下载速率，网络延时等信息。</p>
</blockquote>
<h2>快速配置</h2>
<div class="highlight"><pre><span></span>wget -N --no-check-certificate https://raw.github.com/sivel/speedtest-cli/master/speedtest.py
chmod a+rx speedtest.py
python speedtest.py
</pre></div>
<p>运行脚本后如果提示</p>
<div class="highlight"><pre><span></span>-bash: python: <span class="nb">command</span> not found
</pre></div>
<p>可能是因为部分Linux系统自带的是python3，这个时候我们只需要稍微修改下，将运行脚本命令修改为</p>
<div class="highlight"><pre><span></span>python3 speedtest.py
</pre></div>
<p>代码执行结果如下（参考）</p>
<div class="highlight"><pre><span></span>root@debian:~# python3 speedtest.py
Retrieving speedtest.net configuration...
Testing from Choopa, LLC <span class="o">(</span><span class="m">108</span>.160.13x.xx<span class="o">)</span>...
Retrieving speedtest.net server list...
Selecting best server based on ping...
Hosted by OPEN Project <span class="o">(</span>via 20G SINET<span class="o">)</span> <span class="o">(</span>Tokyo<span class="o">)</span> <span class="o">[</span><span class="m">13</span>.54 km<span class="o">]</span>: <span class="m">2</span>.292 ms
Testing download speed................................................................................
Download: <span class="m">1278</span>.77 Mbit/s
Testing upload speed......................................................................................................
Upload: <span class="m">2230</span>.29 Mbit/s
</pre></div>
<p>就能测出小鸡的运行速度叻(vu is best!</p>
<h2>分享结果</h2>
<p>有时候我们会想分享一下测速结果，如果是直接复制测速数据的话有点不太雅观，这个时候我们可以将测速结果生成一张图片并分享，只需要稍微修改下运行脚本命令</p>
<div class="highlight"><pre><span></span>python speedtest.py --share
</pre></div>
<p>如果是python3的话就改为</p>
<div class="highlight"><pre><span></span>python3 speedtest.py --share
</pre></div>
<p>代码执行结果如下（参考）</p>
<div class="highlight"><pre><span></span>root@debian:~# python3 speedtest.py --share
Retrieving speedtest.net configuration...
Testing from Choopa, LLC <span class="o">(</span><span class="m">108</span>.160.13x.xx<span class="o">)</span>...
Retrieving speedtest.net server list...
Selecting best server based on ping...
Hosted by IPA CyberLab <span class="o">(</span>Bunkyo<span class="o">)</span> <span class="o">[</span><span class="m">14</span>.09 km<span class="o">]</span>: <span class="m">2</span>.729 ms
Testing download speed................................................................................
Download: <span class="m">1003</span>.16 Mbit/s
Testing upload speed......................................................................................................
Upload: <span class="m">1574</span>.85 Mbit/s
Share results: https://www.speedtest.net/result/9197068694.png
</pre></div>
<p>在浏览器里复制SpeedTest生成给你的图片地址：<a href="https://www.speedtest.net/result/9197068694.png">https://www.speedtest.net/result/9197068694.png</a></p>
<p>就能得到一张简洁，精美的测速图。</p>
<p><figure style="flex: 87.5" ><img width="350" height="200" src="https://www.speedtest.net/result/9197068694.png" /><figcaption>vu is best！</figcaption></figure></p>
<h2>进阶配置</h2>
<p>众所周知，SpeedTest的测速是以节点最近的一个测速点进行测速。有时候默认的测速点会很迷惑，速度经常跑不上去，这可能是由于机子ip没有被识别到正确的地址，导致测速点可能隔着一条太平洋。这个时候我们可以指定区域测速。</p>
<p>比如我们指定小鸡在日本区域进行测速，那么我们可以先列出日本区域的测速节点。输入指令</p>
<div class="highlight"><pre><span></span>python speedtest.py --list <span class="p">|</span> grep Japan
<span class="c1"># python3的话使用下面这条</span>
python3 speedtest.py --list <span class="p">|</span> grep Japan
</pre></div>
<p>执行后输出如下</p>
<div class="highlight"><pre><span></span>root@debian:~# python3 speedtest.py --list <span class="p">|</span> grep Japan
<span class="m">24333</span><span class="o">)</span> Rakuten Mobile , Inc <span class="o">(</span>Tokyo, Japan<span class="o">)</span> <span class="o">[</span><span class="m">13</span>.54 km<span class="o">]</span>
<span class="m">15047</span><span class="o">)</span> OPEN Project <span class="o">(</span>via 20G SINET<span class="o">)</span> <span class="o">(</span>Tokyo, Japan<span class="o">)</span> <span class="o">[</span><span class="m">13</span>.54 km<span class="o">]</span>
<span class="m">28910</span><span class="o">)</span> fdcservers.net <span class="o">(</span>Tokyo, Japan<span class="o">)</span> <span class="o">[</span><span class="m">13</span>.54 km<span class="o">]</span>
<span class="m">21569</span><span class="o">)</span> i3D.net <span class="o">(</span>Tokyo, Japan<span class="o">)</span> <span class="o">[</span><span class="m">13</span>.54 km<span class="o">]</span>
<span class="m">14623</span><span class="o">)</span> IPA CyberLab <span class="o">(</span>Bunkyo, Japan<span class="o">)</span> <span class="o">[</span><span class="m">14</span>.09 km<span class="o">]</span>
 <span class="m">8407</span><span class="o">)</span> Allied Telesis Capital Corporation <span class="o">(</span>Sagamihara, Japan<span class="o">)</span> <span class="o">[</span><span class="m">35</span>.57 km<span class="o">]</span>
 <span class="m">6087</span><span class="o">)</span> Allied Telesis Capital Corporation <span class="o">(</span>Fussa-shi, Japan<span class="o">)</span> <span class="o">[</span><span class="m">42</span>.59 km<span class="o">]</span>
 <span class="m">7139</span><span class="o">)</span> SoftEther Corporation <span class="o">(</span>Tsukuba, Japan<span class="o">)</span> <span class="o">[</span><span class="m">57</span>.04 km<span class="o">]</span>
 <span class="m">6766</span><span class="o">)</span> JAIST<span class="o">(</span>ino-lab<span class="o">)</span> <span class="o">(</span>Nomi, Japan<span class="o">)</span> <span class="o">[</span><span class="m">305</span>.16 km<span class="o">]</span>
<span class="m">24774</span><span class="o">)</span> Local24 Inc., <span class="o">(</span>Kyoto, Japan<span class="o">)</span> <span class="o">[</span><span class="m">368</span>.32 km<span class="o">]</span>
 <span class="m">6405</span><span class="o">)</span> Allied Telesis Capital Corporation <span class="o">(</span>Misawa, Japan<span class="o">)</span> <span class="o">[</span><span class="m">584</span>.23 km<span class="o">]</span>
<span class="m">18709</span><span class="o">)</span> extride inc <span class="o">(</span>Hitoyoshi, Japan<span class="o">)</span> <span class="o">[</span><span class="m">911</span>.19 km<span class="o">]</span>
 <span class="m">6581</span><span class="o">)</span> haza <span class="o">(</span>Haebaru, Japan<span class="o">)</span> <span class="o">[</span><span class="m">1549</span>.99 km<span class="o">]</span>
<span class="m">21118</span><span class="o">)</span> GLBB Japan <span class="o">(</span>Naha, Japan<span class="o">)</span> <span class="o">[</span><span class="m">1551</span>.81 km<span class="o">]</span>
<span class="m">30230</span><span class="o">)</span> Lequios <span class="o">(</span>Naha City, Japan<span class="o">)</span> <span class="o">[</span><span class="m">1551</span>.81 km<span class="o">]</span>
<span class="m">31181</span><span class="o">)</span> Allied Telesis Capital Corp. <span class="o">(</span>Okinawa, Japan<span class="o">)</span> <span class="o">[</span><span class="m">1557</span>.43 km<span class="o">]</span>
</pre></div>
<p>前面数字代表的是测速节点的数字id，后面xxx Km指测速点与小鸡的物理距离。</p>
<p>比方说我们要在 i3D.net 这个测速点进行测速并分享，那么我们可以修改启动命令为</p>

<pre><code>python speedtest.py --server 21569 --share
# python3 用下面这条
python3 speedtest.py --server 21569 --share</code></pre>
<p>如果想要更多测速节点参考的话，可以使用命令</p>

<pre><code>python speedtest.py --list|more
# python3
python3 speedtest.py --list|more</code></pre>
<p>来获取更多国家地区的测速节点。</p>

            </div>
        </article>
        <div id="ga-tags">
    
    <span class="ga-tag">
        <a class="ga-highlight" href="/tag/Linux/">#Linux</a>
    </span>
    
    <span class="ga-tag">
        <a class="ga-highlight" href="/tag/speedtest/">#speedtest</a>
    </span>
    
</div>
    </section>

    
<section id="ga-content_pager">

    <div class="next">
        <h3>No More</h3>
        <p class="yue">This is the latest one.</p>
    </div>


    <div class="prev">
        <a class="ga-highlight" href="/archives/clashrtoswitch/">利用Clash代理加速Switch下载</a>
        <p class="yue">优雅的使用Clash</p>
    </div>

</section>


    

</main>

                <footer class="ga-mono" id="ga-footer">
                    <section>
                        <span id="ga-uptime"></span>
                        <span class="brand">Escape Project</span>
                    </section>
                    <section>
                        <p class="copyright">
                            <span>Copyright © 2020 KOI</span>
                            <span>Powered by <a no-style href="https://github.com/AlanDecode/Maverick" target="_blank">Maverick & Galileo</a></span>
                        </p>
                        <div class="copyright">
                            <span class="footer-addon">
                                
                            </span>
                            <nav class="social-links">
                                <ul><li><a class="no-style" title="Twitter" href="https://twitter.com/" target="_blank"><i class="gi gi-twitter"></i>Twitter</a></li><span class="separator">·</span><li><a class="no-style" title="GitHub" href="https://github.com/narakoi" target="_blank"><i class="gi gi-github"></i>GitHub</a></li><span class="separator">·</span><li><a class="no-style" title="Weibo" href="https://weibo.com/" target="_blank"><i class="gi gi-weibo"></i>Weibo</a></li></ul>
                            </nav>
                        </div>
                    </section>
                    <script>
                        var site_build_date = "2019-12-18T16:51+08:00"
                    </script>
                    <script src="https://cdn.jsdelivr.net/gh/narakoi/narakoi.github.io@master/assets/galileo-dc4baa7cf4.js"></script>
                </footer>
            </div>
        </div>
    </div>

    <!--katex-->
    <script defer src="https://cdn.jsdelivr.net/gh/narakoi/narakoi.github.io@master/assets/katex.min.js"></script>
    <script>
    mathOpts = {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "\\[", right: "\\]", display: true},
            {left: "$", right: "$", display: false},
            {left: "\\(", right: "\\)", display: false}
        ]
    };
    </script>
    <script defer src="https://cdn.jsdelivr.net/gh/narakoi/narakoi.github.io@master/assets/auto-render.min.js" onload="renderMathInElement(document.body, mathOpts);"></script>

    <script src="https://cdn.jsdelivr.net/gh/narakoi/narakoi.github.io@master/assets/ExSearch/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/narakoi/narakoi.github.io@master/assets/ExSearch/ExSearch-493cb9cd89.js"></script>

    
    </body>
</html>